(()=>{firebase.initializeApp({});const e=document.getElementById("loginForm"),t=document.getElementById("signupForm"),n=document.getElementById("showSignup"),s=document.getElementById("showLogin"),o=document.getElementById("loginError"),a=document.getElementById("signupError");n.addEventListener("click",(n=>{n.preventDefault(),e.classList.add("hidden"),t.classList.remove("hidden")})),s.addEventListener("click",(n=>{n.preventDefault(),t.classList.add("hidden"),e.classList.remove("hidden")})),document.getElementById("loginButton").addEventListener("click",(async()=>{const e=document.getElementById("loginEmail").value,t=document.getElementById("loginPassword").value;try{o.textContent="";const n=await firebase.auth().signInWithEmailAndPassword(e,t);await chrome.storage.sync.set({userId:n.user.uid}),window.location.href="popup.html"}catch(e){o.textContent=e.message}})),document.getElementById("signupButton").addEventListener("click",(async()=>{const e=document.getElementById("signupEmail").value,t=document.getElementById("signupPassword").value,n=document.getElementById("confirmPassword").value;try{if(a.textContent="",t!==n)throw new Error("Passwords do not match");const s=await firebase.auth().createUserWithEmailAndPassword(e,t);await firebase.firestore().collection("users").doc(s.user.uid).set({stats:{totalMatches:0,wins:0,losses:0,kills:0,deaths:0,assists:0,lastUpdated:firebase.firestore.FieldValue.serverTimestamp()}}),await chrome.storage.sync.set({userId:s.user.uid}),window.location.href="popup.html"}catch(e){a.textContent=e.message}})),firebase.auth().onAuthStateChanged((e=>{e&&(window.location.href="popup.html")}))})();